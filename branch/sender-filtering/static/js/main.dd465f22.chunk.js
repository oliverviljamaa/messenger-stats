(this["webpackJsonpmessenger-stats"]=this["webpackJsonpmessenger-stats"]||[]).push([[0],{307:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},311:function(e,t,n){"use strict";var r,a=n(27),c=(n(582),n(310)),u=n(0),s=n.n(u),o=n(45),i=n.n(o),l=n(138),d=n(194),f=n(90),m=n(195),b=n(93),p=n(599),g=n(196),E=n(600),h=n(601),v=n(602),O=n(617),y=n(603),j=n(604),k=n(613);!function(e){e.DAY="DAY",e.WEEK="WEEK",e.MONTH="MONTH",e.YEAR="YEAR"}(r||(r={}));var w=r.DAY,M=r.WEEK,A=r.MONTH,T=r.YEAR;function Y(e){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t).map(D),e.next=3,Promise.all(n);case 3:return r=e.sent.flat(),e.abrupt("return",R(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N={senders:[],messages:{DAY:[],WEEK:[],MONTH:[],YEAR:[]}};function R(e){var t=function(e){return Object(b.sortBy)(e,"time")}(e),n=function(e){return Object(b.orderBy)(Object.entries(C(e)).map((function(e){var t=Object(a.a)(e,2);return{sender:t[0],numberOfMessages:t[1]}})),"numberOfMessages","desc").map((function(e){return e.sender}))}(e),r=function(e){return function(e,t,n){return function(e,t){var n=function(e,t){return Object(b.groupBy)(e,(function(e){var n=e.time;return P(t)(n)}))}(e,t);return function(e,t){if(0===e.length)return function(){return[]};var n=e[0].time,r=e[e.length-1].time,a=P(t)(n),c=r;return{DAY:function(){return Object(v.a)({start:a,end:c})},WEEK:function(){return Object(O.a)({start:a,end:c},{weekStartsOn:1})},MONTH:function(){return Object(y.a)({start:a,end:c})},YEAR:function(){return Object(j.a)({start:a,end:c})}}[t]}(e,t)().map((function(e){return{time:e.getTime(),messages:n[e.getTime()]||[]}}))}(e,t).map((function(e){var r=e.time,a=C(e.messages);return Object(d.a)({id:U(Number(r),t)},n.reduce((function(e,t){return Object(d.a)({},e,Object(l.a)({},t,a[t]||0))}),{}))}))}(t,e,n)};return{senders:n,messages:{DAY:r(w),WEEK:r(M),MONTH:r(A),YEAR:r(T)}}}function D(e){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return n=e.sent,e.abrupt("return",n?K(n):[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return B.apply(this,arguments)}function B(){return(B=Object(f.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:return n=e.sent,e.abrupt("return",n?JSON.parse(n):null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){var n,r=null===(n=e.target)||void 0===n?void 0:n.result;t(r?r.toString():null)},n.readAsText(e)}))}function K(e){return e.messages.map((function(e){var t=e.sender_name,n=e.content,r=e.timestamp_ms;return{sender:Object(m.decode)(t),content:n?Object(m.decode)(n):null,time:r}}))}function C(e){return Object(b.mapValues)(function(e){return Object(b.groupBy)(e,(function(e){return e.sender}))}(e),(function(e){return e.length}))}function P(e){return{DAY:function(e){return Object(p.a)(e).getTime()},WEEK:function(e){return Object(g.a)(e,{weekStartsOn:1}).getTime()},MONTH:function(e){return Object(E.a)(e).getTime()},YEAR:function(e){return Object(h.a)(e).getTime()}}[e]}function U(e,t){return"".concat(Object(k.a)(new Date(e),{DAY:"dd/MM/yyyy",WEEK:"dd/MM/yyyy",MONTH:"MMM yyyy",YEAR:"yyyy"}[t])).concat({DAY:"",WEEK:" week",MONTH:"",YEAR:""}[t])}n(583);var _=n(309),I=(n(213),n(312)),J=n(615);n(362);function L(){}var F=function(e){var t=e.onComplete,n=e.style;return s.a.createElement("div",null,s.a.createElement(_.a,{beforeUpload:function(){var e=Object(f.a)(i.a.mark((function e(n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r,n.uid!==c[c.length-1].uid){e.next=5;break}return e.next=3,Y(r);case 3:a=e.sent,t(a);case 5:return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}var c}),e)})));return function(t,n){return e.apply(this,arguments)}}(),customRequest:L,accept:"application/json",multiple:!0,showUploadList:!1},s.a.createElement(I.a,{block:!0,style:n},s.a.createElement(J.a,null)," Upload messages")))},G=(n(433),n(207)),V=function(e){var t=e.selected,n=e.onSelect,a=e.disabled,c=e.disabledUnits,u=e.style;return s.a.createElement(G.a.Group,{disabled:a,style:u},Object.values(r).map((function(e){return s.a.createElement(G.a.Button,{value:e,checked:e===t,onChange:function(e){var t=e.target.value;return n(t)},disabled:c.includes(e),key:e},e)})))},q=(n(435),n(314)),$=n(313),z=(n(437),n(292)),Q=(n(439),n(208)),X=function(e){var t=e.senders,n=e.selected,r=e.onChange,a=e.colors;return s.a.createElement("div",null,s.a.createElement(Q.a,{indeterminate:n.length>0&&n.length<t.length,onChange:function(e){var n=e.target.checked;return r(n?t:[])},checked:n.length===t.length},"All senders"),s.a.createElement(z.a,{style:{margin:"12px 0"}}),t.map((function(e,t){return s.a.createElement(u.Fragment,{key:e},s.a.createElement(Q.a,{onChange:function(t){var a=t.target.checked;return r(a?[].concat(Object($.a)(n),[e]):n.filter((function(t){return t!==e})))},checked:n.includes(e)},s.a.createElement(q.a,{color:a[t%a.length],text:e})),s.a.createElement("br",null))})))},Z=(n(441),n(55)),ee=function(){return s.a.createElement(Z.a,{image:Z.a.PRESENTED_IMAGE_SIMPLE,style:{marginTop:128}})},te=n(293);function ne(e){return e.length>20?e.filter((function(t,n){return n%Math.floor(e.length/20)===0})).map((function(e){return e.id})):void 0}var re=function(e){var t=e.senders,n=e.data,r=e.colors;return s.a.createElement("div",{style:{height:640}},s.a.createElement(te.a,{data:n,keys:t,colors:r,margin:{top:48,right:48,bottom:96,left:72},enableLabel:!1,axisBottom:{tickPadding:8,tickRotation:-45,tickValues:ne(n)},animate:!1}))},ae=["#dc3f66","#67be40","#a859ce","#3fc06f","#d246a2","#4f8c28","#616cdc","#b8b939","#5861a9","#de9230","#4c96d0","#d1512e","#47c3d7","#a9484b","#65c59e","#944e98","#85bd67","#cf87d1","#44894d","#9594de","#918724","#a04a72","#31957f","#e383a2","#2a6a45","#e3876d","#9fab64","#9e622c","#696b2b","#d1a563"],ce=c.a.Title;function ue(e){return Object.values(r).filter((function(t){return e.messages[t].length>500}))}t.a=function(){var e=Object(u.useState)(N),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)(n.senders),i=Object(a.a)(o,2),l=i[0],d=i[1],f=Object(u.useState)(r.MONTH),m=Object(a.a)(f,2),b=m[0],p=m[1],g=n.senders,E=n.messages[b];return s.a.createElement("main",{style:{padding:32}},s.a.createElement(ce,null,"Messenger stats"),s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("div",null,s.a.createElement(F,{onComplete:function(e){d(e.senders),c(e)},style:{marginBottom:24}}),s.a.createElement(V,{selected:b,onSelect:p,disabled:n===N,disabledUnits:ue(n),style:{marginBottom:24}}),g.length>0&&s.a.createElement(X,{senders:g,selected:l,onChange:d,colors:ae})),s.a.createElement("div",{style:{flex:1}},n===N?s.a.createElement(ee,null):s.a.createElement(re,{senders:l,data:E,colors:ae}))))}},348:function(e,t,n){e.exports=n(349)},349:function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),r=n.n(t),a=n(14),c=n.n(a),u=(n(355),n(308)),s=n(311),o=n(307),i=Object(u.hot)(e)(s.a);c.a.render(r.a.createElement(i,null),document.getElementById("root")),o.a()}.call(this,n(350)(e))},355:function(e,t,n){},362:function(e,t,n){}},[[348,1,2]]]);
//# sourceMappingURL=main.dd465f22.chunk.js.map